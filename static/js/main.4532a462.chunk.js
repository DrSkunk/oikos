(this.webpackJsonpoikos=this.webpackJsonpoikos||[]).push([[0],{28:function(e,t,n){e.exports=n(49)},33:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),l=n(21),o=n.n(l),i=(n(33),n(4)),c=n(5),u=n(6),s=n(7),d=n(2),p=n(14),f=n.n(p),v=n(3),m=n(10),h=n.n(m),b=(n(42),n(44),{apiKey:"AIzaSyA2Gllzx6Nrq32n3WdEBiWdTP0jG0a4swk",authDomain:"oikos-game.firebaseapp.com",databaseURL:"https://oikos-game.firebaseio.com",projectId:"oikos-game",storageBucket:"oikos-game.appspot.com",messagingSenderId:"996454215912"}),g=new(function(){function e(t){Object(i.a)(this,e),h.a.initializeApp(b),this.auth=h.a.auth(),this.db=h.a.database()}return Object(c.a)(e,[{key:"gameId",set:function(e){this.ref=this.db.ref("games").child(e)}}]),e}()),y=n(22),k=n.n(y),w="moveWorker",E="addLevel",j="removeLevel",O="addWorker",x="removeWorker",C="addRoof",I="removeRoof",M=n(15),S=n.n(M),T=n(23);function W(e,t,n){return A.apply(this,arguments)}function A(){return(A=Object(T.a)(S.a.mark((function e(t,n,r){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.ref.child("board").child(n).update(r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t,n,r,a){var l=t.mode,o=t.selectedTile,i=t.team,c=r.board,u=k()(t);switch(console.log("newState",u),l){case w:if(null===o)return;console.log("player",o,r,c[o]),W(e,n,{player:c[o].player}),W(e,o,{player:0});break;case E:W(e,n,{level:Math.min(a.level+1,3)});break;case j:W(e,n,{level:Math.max(a.level-1,0)});break;case O:W(e,n,{player:i});break;case x:W(e,n,{player:0});break;case C:W(e,n,{roof:!0});break;case I:W(e,n,{roof:!1})}}function L(){var e=Object(d.a)(["\n  fill: ",";\n  stroke: #000000;\n  stroke-width: 2.5px;\n"]);return L=function(){return e},e}function B(){var e=Object(d.a)(["\n  fill: blue;\n  stroke: #000000;\n  stroke-width: 2.5px;\n"]);return B=function(){return e},e}function G(){var e=Object(d.a)(["\n  fill: gray;\n  stroke: #000000;\n  stroke-width: 2.5px;\n"]);return G=function(){return e},e}function z(){var e=Object(d.a)(["\n  fill: green;\n"]);return z=function(){return e},e}function P(){var e=Object(d.a)(["\n  fill: red;\n"]);return P=function(){return e},e}function D(){var e=Object(d.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  width: 100px;\n  height: 100px;\n  background-color: #ddd;\n  border: 1px solid transparent;\n  ","\n  \n  cursor: pointer;\n  &:hover {\n    border: 1px solid black;\n  }\n"]);return D=function(){return e},e}var J=v.a.div(D(),(function(e){return e.selected?"outline: 5px solid yellow;":""})),U=v.a.rect(P()),q=v.a.rect(z()),K=v.a.polygon(G()),N=v.a.circle(B()),$=v.a.circle(L(),(function(e){return F[e.player]})),F={1:"red",2:"green",3:"blue",4:"purple"},H=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.level,n=e.roof,r=e.player,l=e.selected,o=e.onClick;return a.a.createElement(J,{onClick:o,selected:l},a.a.createElement("svg",{width:"100",height:"100"},t>=1?a.a.createElement(U,{width:"100",height:"100"}):null,t>=2?a.a.createElement(q,{width:"80",height:"80",x:"10",y:"10"}):null,t>=3?a.a.createElement(K,{points:"20,62.4 20,37.55 37.534,20 62.4,20 80,37.55 80,62.4 62.4,80 37.55,80"}):null,n?a.a.createElement(N,{cx:"50",cy:"50",r:"25"}):null,r?a.a.createElement($,{cx:"50",cy:"50",r:"20",player:r}):null))}}]),n}(r.Component);function Q(){var e=Object(d.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  height: 540px;\n"]);return Q=function(){return e},e}var V=v.a.div(Q()),X=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).onTileClick=function(e,t){console.log("Click",e,t),r.setState((function(n){if(n.mode===w)return n.selectedTile===e?{selectedTile:null}:null===n.selectedTile?{selectedTile:e}:(R(r.props.gameId,n,e,r.props.game,t),{selectedTile:null});R(r.props.gameId,n,e,r.props.game,t)}))},r.setMode=function(e){console.log("newMode",e),e!==w?r.setState({mode:e,selectedTile:null}):r.setState({mode:e})},r.handleChange=function(e){var t=parseInt(e.target.value);r.setState({team:t})},console.log("Game"),r.state={mode:w,selectedTile:null,team:1},r}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.props.game,n=this.state,r=n.mode,l=n.team,o=n.selectedTile,i=Object.values(t.board).map((function(t,n){return a.a.createElement(H,{key:"tile"+n,level:t.level,roof:t.roof,player:t.player,onClick:function(){e.onTileClick(n,t)},selected:n===o})}));return a.a.createElement("div",null,a.a.createElement("label",null,"Team",a.a.createElement("select",{value:l,onChange:this.handleChange},a.a.createElement("option",{value:"1"},"Red"),a.a.createElement("option",{value:"2"},"Green"),a.a.createElement("option",{value:"3"},"Blue"),a.a.createElement("option",{value:"4"},"Purple"))),a.a.createElement("button",{onClick:function(){return e.setMode(w)},disabled:r===w},"Move worker"),a.a.createElement("button",{onClick:function(){return e.setMode(E)},disabled:r===E},"Add level"),a.a.createElement("button",{onClick:function(){return e.setMode(j)},disabled:r===j},"remove level"),a.a.createElement("button",{onClick:function(){return e.setMode(O)},disabled:r===O},"Add Worker"),a.a.createElement("button",{onClick:function(){return e.setMode(x)},disabled:r===x},"Remove worker"),a.a.createElement("button",{onClick:function(){return e.setMode(C)},disabled:r===C},"Add roof"),a.a.createElement("button",{onClick:function(){return e.setMode(I)},disabled:r===I},"Remove roof"),a.a.createElement(V,null,i))}}]),n}(r.Component);function Y(){var e=Object(d.a)(["\n  width: 540px;\n  margin: 0 auto;\n"]);return Y=function(){return e},e}var Z=v.a.div(Y());function _(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t||(t=f()());var n=window.location.origin+window.location.pathname+"?gameId="+t;e?window.history.pushState(null,null,n):window.history.replaceState(null,null,n)}var ee=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var r;Object(i.a)(this,n),r=t.call(this,e);var a=new URL(window.location).searchParams.get("gameId");null===a&&_(!1,a=f()());var l=a.replace(/[^\w\s]/gi,"");return a!==l&&_(!1,l),g.gameId=a,r.state={loading:!0,gameId:a},r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.updateListener=g.ref.on("value",(function(t){var n=t.val();null===n?(e.state.gameId,void g.ref.set({board:[{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0},{level:0,roof:!1,player:0}]}).catch((function(e){return console.error(e)}))).catch((function(t){e.setState({error:!0})})):e.setState({game:n,loading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.error,r=e.game,l=e.gameId;return n?a.a.createElement("div",null,"An error occured, please refresh page to try again. If this persists, contact ",a.a.createElement("a",{href:"https://sebastiaanjansen.be/contact"},"Sebastiaan"),"."):t?a.a.createElement("div",null,"Loading...."):a.a.createElement(Z,null,a.a.createElement(X,{game:r,gameId:l}),a.a.createElement("button",{onClick:function(){_(!0)}},"Start nieuw spel"))}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.4532a462.chunk.js.map