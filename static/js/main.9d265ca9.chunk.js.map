{"version":3,"sources":["util/firebase.js","util/api.js","util/modes.js","util/gameLogic.js","atoms/Tile.js","components/Game.js","Room.js","App.js","serviceWorker.js","index.js"],"names":["config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","app","initializeApp","this","auth","db","database","serverTime","ServerValue","TIMESTAMP","gameId","ref","child","emptyBoard","level","roof","player","createGame","firebase","set","board","catch","e","console","error","updateTile","tileIndex","newValue","update","lastUpdated","resetBoard","parseAction","state","game","tile","mode","selectedTile","team","newState","cloneDeep","log","modes","Math","min","max","Base","styled","div","props","selected","Image","img","Level1","Level2","Level3","Roof","Player","circle","playerColor","1","2","3","4","Tile","onClick","style","zIndex","width","height","src","alt","position","cx","cy","r","Component","Board","Game","onTileClick","index","setState","setMode","newMode","handleChange","event","parseInt","target","value","tiles","Object","values","map","i","key","onChange","Button","variant","disabled","Wrapper","App","room","loading","updateListener","on","data","val","href","onRoomChange","startNewGame","newUrl","window","location","origin","pathname","history","replaceState","lobby","URL","searchParams","get","replace","randomWords","join","Container","Row","Col","className","InputGroup","FormControl","placeholder","aria-label","Append","Boolean","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","message"],"mappings":"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","file":"static/js/main.9d265ca9.chunk.js","sourcesContent":["import app from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';\n\n// Initalize and export Firebase.\nconst config = {\n  apiKey: 'AIzaSyA2Gllzx6Nrq32n3WdEBiWdTP0jG0a4swk',\n  authDomain: 'oikos-game.firebaseapp.com',\n  databaseURL: 'https://oikos-game.firebaseio.com',\n  projectId: 'oikos-game',\n  storageBucket: 'oikos-game.appspot.com',\n  messagingSenderId: '996454215912',\n};\nclass Firebase {\n  constructor() {\n    app.initializeApp(config);\n\n    this.auth = app.auth();\n    this.db = app.database();\n    this.serverTime = app.database.ServerValue.TIMESTAMP;\n  }\n\n  set gameId(gameId) {\n    this.ref = this.db.ref('games').child(gameId);\n  }\n}\nexport default new Firebase();\n","import firebase from './firebase';\n\nconst emptyBoard = [\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n  {\n    level: 0,\n    roof: false,\n    player: 0,\n  },\n];\n\nexport function createGame() {\n  firebase.ref\n    .set({\n      board: emptyBoard,\n    })\n    .catch((e) => console.error(e));\n}\nexport function updateTile(tileIndex, newValue) {\n  firebase.ref.update({ lastUpdated: firebase.serverTime });\n  return firebase.ref.child('board').child(tileIndex).update(newValue);\n}\n\nexport function resetBoard() {\n  createGame();\n}\n","export default {\n  moveWorker: 'moveWorker',\n  addLevel: 'addLevel',\n  removeLevel: 'removeLevel',\n  addWorker: 'addWorker',\n  removeWorker: 'removeWorker',\n  addRoof: 'addRoof',\n  removeRoof: 'removeRoof'\n};\n","import cloneDeep from 'lodash.clonedeep';\nimport modes from './modes';\nimport { updateTile } from './api';\n\nexport function parseAction(state, tileIndex, game, tile) {\n  const { mode, selectedTile, team } = state;\n  const { board } = game;\n  const newState = cloneDeep(state);\n  console.log('newState', newState);\n  switch (mode) {\n    case modes.moveWorker:\n      if (selectedTile === null) {\n        return;\n      }\n      console.log('player', selectedTile, game, board[selectedTile]);\n      updateTile(tileIndex, {\n        player: board[selectedTile].player,\n      });\n      updateTile(selectedTile, {\n        player: 0,\n      });\n      break;\n    case modes.addLevel:\n      updateTile(tileIndex, {\n        level: Math.min(tile.level + 1, 3),\n      });\n      break;\n    case modes.removeLevel:\n      updateTile(tileIndex, {\n        level: Math.max(tile.level - 1, 0),\n      });\n      break;\n    case modes.addWorker:\n      updateTile(tileIndex, {\n        player: team,\n      });\n      break;\n    case modes.removeWorker:\n      updateTile(tileIndex, {\n        player: 0,\n      });\n      break;\n    case modes.addRoof:\n      updateTile(tileIndex, {\n        roof: true,\n      });\n      break;\n    case modes.removeRoof:\n      updateTile(tileIndex, {\n        roof: false,\n      });\n      break;\n    default:\n      break;\n  }\n}\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\nconst Base = styled.div`\n  /* display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center; */\n  width: 100px;\n  height: 100px;\n  background-color: #ddd;\n  border: 1px solid transparent;\n  position: relative;\n  ${(props) => (props.selected ? 'outline: 5px solid yellow;' : '')}\n\n  cursor: pointer;\n  &:hover {\n    border: 1px solid black;\n  }\n`;\n\nconst Image = styled.img`\n  position: absolute;\n  left: 0;\n  top: 0%;\n`;\n\nconst Level1 = styled(Image)`\n  z-index: 1;\n`;\n\nconst Level2 = styled(Image)`\n  z-index: 2;\n`;\n\nconst Level3 = styled(Image)`\n  z-index: 3;\n`;\n\nconst Roof = styled(Image)`\n  z-index: 4;\n`;\nconst Player = styled.circle`\n  fill: ${(props) => playerColor[props.player]};\n  stroke: #000000;\n  stroke-width: 2.5px;\n`;\n\nconst playerColor = {\n  1: 'red',\n  2: 'green',\n  3: 'blue',\n  4: 'purple',\n};\n\nexport default class Tile extends Component {\n  render() {\n    const { level, roof, player, selected, onClick } = this.props;\n\n    // return (\n    //   <Base onClick={onClick} selected={selected}>\n    //     <svg width=\"100\" height=\"100\">\n    //       {level >= 1 ? <Level1 width=\"100\" height=\"100\" /> : null}\n    //       {level >= 2 ? <Level2 width=\"80\" height=\"80\" x=\"10\" y=\"10\" /> : null}\n    //       {level >= 3 ? (\n    //         <Level3 points=\"20,62.4 20,37.55 37.534,20 62.4,20 80,37.55 80,62.4 62.4,80 37.55,80\" />\n    //       ) : null}\n    //       {roof ? <Roof cx=\"50\" cy=\"50\" r=\"25\" /> : null}\n    //       {player ? <Player cx=\"50\" cy=\"50\" r=\"20\" player={player} /> : null}\n    //     </svg>\n    //   </Base>\n    // );\n    return (\n      <Base onClick={onClick} selected={selected}>\n        {level >= 1 ? (\n          <Level1\n            style={{ zIndex: 1 }}\n            width=\"100\"\n            height=\"100\"\n            src=\"/oikos/imgs/building/stage1.png\"\n            alt=\"level1\"\n          />\n        ) : null}\n        {level >= 2 ? (\n          <Level2\n            style={{ zIndex: 2 }}\n            width=\"100\"\n            height=\"100\"\n            src=\"/oikos/imgs/building/stage2.png\"\n            alt=\"level2\"\n          />\n        ) : null}\n        {level >= 3 ? (\n          <Level3\n            style={{ zIndex: 3 }}\n            width=\"100\"\n            height=\"100\"\n            src=\"/oikos/imgs/building/stage3.png\"\n            alt=\"level3\"\n          />\n        ) : null}\n        {roof ? (\n          <Roof\n            style={{ zIndex: 4 }}\n            width=\"100\"\n            height=\"100\"\n            src=\"/oikos/imgs/building/roof.png\"\n            alt=\"roof\"\n          />\n        ) : null}\n        {player ? (\n          <svg\n            width=\"100\"\n            height=\"100\"\n            style={{ position: 'relative', zIndex: 5 }}\n          >\n            <Player cx=\"50\" cy=\"50\" r=\"20\" player={player} />\n          </svg>\n        ) : null}\n      </Base>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport Button from 'react-bootstrap/Button';\nimport { resetBoard } from '../util/api';\nimport { parseAction } from '../util/gameLogic';\nimport modes from '../util/modes';\nimport Tile from '../atoms/Tile';\n\nconst Board = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  height: 540px;\n  margin-top: 10px;\n`;\n\nexport default class Game extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { mode: modes.moveWorker, selectedTile: null, team: 1 };\n  }\n\n  onTileClick = (index, tile) => {\n    // Toggle selected tile\n    this.setState((state) => {\n      if (state.mode === modes.moveWorker) {\n        if (state.selectedTile === index) {\n          return { selectedTile: null };\n        } else if (state.selectedTile === null) {\n          return { selectedTile: index };\n        } else {\n          parseAction(state, index, this.props.game, tile);\n          return { selectedTile: null };\n        }\n      } else {\n        parseAction(state, index, this.props.game, tile);\n      }\n    });\n  };\n\n  setMode = (newMode) => {\n    if (newMode !== modes.moveWorker) {\n      this.setState({ mode: newMode, selectedTile: null });\n    } else {\n      this.setState({ mode: newMode });\n    }\n  };\n\n  handleChange = (event) => {\n    const team = parseInt(event.target.value);\n    this.setState({ team });\n  };\n\n  render() {\n    const { game } = this.props;\n    const { mode, team, selectedTile } = this.state;\n    const tiles = Object.values(game.board).map((tile, i) => (\n      <Tile\n        key={'tile' + i}\n        level={tile.level}\n        roof={tile.roof}\n        player={tile.player}\n        onClick={() => {\n          this.onTileClick(i, tile);\n        }}\n        selected={i === selectedTile}\n      />\n    ));\n    return (\n      <div>\n        <label>\n          Team\n          <select value={team} onChange={this.handleChange}>\n            <option value=\"1\">Red</option>\n            <option value=\"2\">Green</option>\n            <option value=\"3\">Blue</option>\n            <option value=\"4\">Purple</option>\n          </select>\n        </label>\n\n        <Button\n          variant=\"secondary\"\n          onClick={() => this.setMode(modes.moveWorker)}\n          disabled={mode === modes.moveWorker}\n        >\n          Move worker\n        </Button>\n        <Button\n          variant=\"secondary\"\n          onClick={() => this.setMode(modes.addLevel)}\n          disabled={mode === modes.addLevel}\n        >\n          Add level\n        </Button>\n        <Button\n          variant=\"secondary\"\n          onClick={() => this.setMode(modes.removeLevel)}\n          disabled={mode === modes.removeLevel}\n        >\n          remove level\n        </Button>\n        <Button\n          variant=\"secondary\"\n          onClick={() => this.setMode(modes.addWorker)}\n          disabled={mode === modes.addWorker}\n        >\n          Add Worker\n        </Button>\n        <Button\n          variant=\"secondary\"\n          onClick={() => this.setMode(modes.removeWorker)}\n          disabled={mode === modes.removeWorker}\n        >\n          Remove worker\n        </Button>\n        <Button\n          variant=\"secondary\"\n          onClick={() => this.setMode(modes.addRoof)}\n          disabled={mode === modes.addRoof}\n        >\n          Add roof\n        </Button>\n        <Button\n          variant=\"secondary\"\n          onClick={() => this.setMode(modes.removeRoof)}\n          disabled={mode === modes.removeRoof}\n        >\n          Remove roof\n        </Button>\n        <Board>{tiles}</Board>\n        <Button variant=\"secondary\" onClick={resetBoard}>\n          Reset board\n        </Button>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport firebase from './util/firebase';\nimport Game from './components/Game';\nimport { createGame } from './util/api';\n\nconst Wrapper = styled.div`\n  width: 540px;\n  margin: 0 auto;\n`;\n\nexport default class App extends Component {\n  constructor(props) {\n    console.log('constructor');\n    super(props);\n    firebase.gameId = this.props.room;\n\n    console.log(firebase, this.props.room);\n\n    this.state = { loading: true };\n  }\n\n  componentDidMount() {\n    this.updateListener = firebase.ref.on('value', (data) => {\n      const game = data.val();\n      if (game === null) {\n        try {\n          createGame(this.state.gameId);\n        } catch (error) {\n          this.setState({ error: true });\n        }\n      } else {\n        this.setState({\n          game,\n          loading: false,\n        });\n      }\n    });\n  }\n\n  render() {\n    const { loading, error, game, gameId } = this.state;\n    if (error) {\n      return (\n        <div>\n          An error occured, please refresh page to try again. If this persists,\n          contact <a href=\"https://sebastiaanjansen.be/contact\">Sebastiaan</a>.\n        </div>\n      );\n    }\n    if (loading) {\n      return <div>Loading....</div>;\n    }\n    return (\n      <Wrapper>\n        <Game game={game} gameId={gameId} />\n      </Wrapper>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport randomWords from 'random-words';\n\nimport Container from 'react-bootstrap/Container';\nimport Button from 'react-bootstrap/Button';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport InputGroup from 'react-bootstrap/InputGroup';\nimport FormControl from 'react-bootstrap/FormControl';\n\nimport Room from './Room';\n\nexport default class App extends Component {\n  state = {};\n\n  constructor(props) {\n    super(props);\n    let room = new URL(window.location).searchParams.get('room');\n    if (!room) {\n      room = randomWords(3).join('-');\n      this.state.lobby = true;\n    } else {\n      room = room.replace(/[^\\w\\s]/gi, '');\n      this.state.lobby = false;\n    }\n\n    this.state.room = room;\n  }\n\n  onRoomChange = (e) => {\n    console.log(e.target.value);\n    this.setState({ room: e.target.value });\n  };\n\n  startNewGame = () => {\n    const newUrl =\n      window.location.origin +\n      window.location.pathname +\n      '?room=' +\n      this.state.room;\n\n    window.history.replaceState(null, null, newUrl);\n    this.setState({ lobby: false });\n  };\n\n  render() {\n    const { room, lobby } = this.state;\n\n    if (lobby) {\n      return (\n        <Container>\n          <Row>\n            <Col className=\"col-lg-4 offset-lg-3\">\n              <h1 className=\"header\">Oikos</h1>\n              <InputGroup>\n                <FormControl\n                  placeholder=\"room code\"\n                  aria-label=\"room code\"\n                  value={room}\n                  onChange={this.onRoomChange}\n                />\n                <InputGroup.Append>\n                  <Button\n                    variant=\"outline-secondary\"\n                    onClick={this.startNewGame}\n                  >\n                    Go\n                  </Button>\n                </InputGroup.Append>\n              </InputGroup>\n            </Col>\n          </Row>\n        </Container>\n      );\n    }\n\n    return <Room room={room}></Room>;\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}